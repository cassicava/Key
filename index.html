<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Gerador de Chaves - Multi Sistema</title>
    <style>
        /* Ajuste Extremo do BODY para garantir 100% da viewport */
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background-color: #f0f2f5;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            margin: 0; 
            padding: 0; /* Remove todo o padding do body */
            box-sizing: border-box;
        }
        
        /* Ajuste do CARD para encaixar na tela */
        .card {
            background: white;
            padding: 0.8rem; /* Padding reduzido ao m√≠nimo */
            border-radius: 8px; /* Borda levemente menor */
            box-shadow: 0 2px 10px rgba(0,0,0,0.1); /* Sombra mais suave */
            width: 95%; /* Ocupa a maior parte da tela */
            max-width: 600px;
            text-align: center;
        }

        h1 { 
            color: #2563eb; 
            margin-bottom: 0.3rem; 
            font-size: 1.4rem; /* Redu√ß√£o m√°xima do t√≠tulo */
        }
        p { 
            color: #64748b; 
            margin-bottom: 0.8rem; 
            font-size: 0.85rem; /* Redu√ß√£o m√°xima da instru√ß√£o */
        }
        
        .control-group {
            display: flex;
            gap: 5px; /* Reduzi o espa√ßo entre os elementos */
            justify-content: center;
            align-items: center;
            margin-bottom: 10px; /* Redu√ß√£o de margem */
            flex-wrap: wrap;
        }

        select, input {
            padding: 8px; /* Redu√ß√£o do padding */
            border-radius: 6px; 
            border: 1px solid #ccc;
            font-size: 0.9rem;
            flex-grow: 1; 
            min-width: 80px; 
        }

        /* Otimiza√ß√£o do input de quantidade */
        #qtd {
            width: 50px !important; 
            flex-grow: 0;
            min-width: 50px;
        }

        button {
            background: #2563eb;
            color: white;
            border: none;
            padding: 8px 15px; /* Redu√ß√£o do padding do bot√£o */
            border-radius: 6px;
            font-size: 0.9rem;
            font-weight: bold;
            cursor: pointer;
            transition: background 0.2s;
            flex-shrink: 0;
        }
        button:hover { background: #1d4ed8; }
        
        .card > button {
            width: 100%;
            margin-top: 8px; /* Margem reduzida */
            background: #475569;
        }

        textarea {
            width: 100%;
            height: 100px; /* **ALTURA CR√çTICA: Reduzida para 100px** */
            margin-top: 10px; /* Margem reduzida */
            padding: 6px; 
            border: 1px solid #e2e8f0;
            border-radius: 6px;
            font-family: monospace;
            font-size: 12px; /* Fonte menor */
            resize: vertical;
            box-sizing: border-box;
        }
        .stats {
            margin-top: 6px; 
            font-size: 0.8rem; /* Fonte menor */
            color: #16a34a;
            font-weight: 500;
        }
    </style>
</head>
<body>

<div class="card">
    <h1>Gerador de Chaves üîë</h1> 
    <p>Selecione o Sistema para gerar.</p> 
    
    <div class="control-group">
        <select id="sistema-selector">
            <option value="JANINA">Aula Pro</option>
            <option value="GATOS">Plant√£o Pro</option>
        </select>

        <input type="number" id="qtd" value="50" min="1" max="1000">
        <button onclick="gerarLote()">Gerar Chaves</button>
    </div>

    <div id="status" class="stats"></div>
    <textarea id="output" readonly placeholder="As chaves geradas aparecer√£o aqui..."></textarea>
    <button onclick="copiar()">Copiar Lista</button> 
</div>

<script>
    const SEGREDO_GATOS = "PACOCA_POMPOM_PRETA_KEY_2025";
    const SEGREDO_JANAINA = "SEMPRE_VOU_TE_AMAR_JANAINA_KEY_2025";

    function gerarAssinatura(textoBase, segredo) {
        let hash = 0;
        const stringMista = textoBase + segredo;
        
        for (let i = 0; i < stringMista.length; i++) {
            const char = stringMista.charCodeAt(i);
            hash = ((hash << 5) - hash) + char;
            hash |= 0;
        }
        
        const hex = Math.abs(hash).toString(16).toUpperCase().padStart(4, '0');
        return hex.slice(-4); 
    }

    function gerarChaveUnica(segredo) {
        const array = new Uint32Array(3);
        window.crypto.getRandomValues(array);
        let corpo = "";
        
        for(let i=0; i<3; i++) {
            const parte = array[i].toString(16).toUpperCase().padStart(4, '0').slice(-4);
            corpo += parte;
        }
        
        const assinatura = gerarAssinatura(corpo, segredo);
        return `${corpo.slice(0,4)}-${corpo.slice(4,8)}-${corpo.slice(8,12)}-${assinatura}`;
    }

    function gerarLote() {
        const qtd = document.getElementById('qtd').value;
        const output = document.getElementById('output');
        const status = document.getElementById('status');
        const sistema = document.getElementById('sistema-selector').value;
        
        const segredoAtual = (sistema === 'GATOS') ? SEGREDO_GATOS : SEGREDO_JANAINA;
        
        let lista = [];

        for(let i=0; i<qtd; i++) {
            lista.push(gerarChaveUnica(segredoAtual));
        }

        output.value = lista.join('\n');
        status.textContent = `${qtd} chaves geradas para: ${sistema === 'GATOS' ? 'Plant√£o Pro' : 'Aula Pro'}`;
    }

    function copiar() {
        const output = document.getElementById('output');
        output.select();
        document.execCommand('copy');
        alert('Chaves copiadas para a √°rea de transfer√™ncia!');
    }
</script>

</body>
</html>
