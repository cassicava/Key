<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Gerador de Chaves - Multi Sistema</title>
    <style>
        /* Ajuste do BODY para centralizar e garantir altura mÃ­nima */
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background-color: #f0f2f5;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            margin: 0;
            /* Adiciona um padding nas laterais para telas muito pequenas */
            padding: 20px; 
            box-sizing: border-box; /* Garante que o padding nÃ£o adicione largura extra */
        }
        
        /* Ajuste do CARD para melhor visualizaÃ§Ã£o em mobile */
        .card {
            background: white;
            padding: 2rem;
            border-radius: 12px;
            box-shadow: 0 4px 20px rgba(0,0,0,0.1);
            width: 100%; /* Ocupa 100% da largura disponÃ­vel */
            max-width: 600px; /* Limite mÃ¡ximo para telas maiores */
            text-align: center;
        }

        h1 { color: #2563eb; margin-bottom: 0.5rem; }
        p { color: #64748b; margin-bottom: 2rem; }
        
        /* Ajuste do grupo de controles para empilhamento em mobile */
        .control-group {
            display: flex;
            gap: 10px;
            justify-content: center;
            align-items: center;
            margin-bottom: 20px;
            flex-wrap: wrap; /* Permite que os itens quebrem a linha se nÃ£o couberem */
        }

        select, input {
            padding: 12px;
            border-radius: 8px;
            border: 1px solid #ccc;
            font-size: 1rem;
            /* Garante que o select/input use largura total em mobile se estiver em uma linha separada */
            flex-grow: 1; 
            min-width: 150px; /* Largura mÃ­nima para ser legÃ­vel */
        }

        button {
            background: #2563eb;
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 8px;
            font-size: 1rem;
            font-weight: bold;
            cursor: pointer;
            transition: background 0.2s;
            /* Garante que o botÃ£o de 'Gerar Chaves' possa ocupar a linha inteira se necessÃ¡rio */
            flex-shrink: 0;
        }
        button:hover { background: #1d4ed8; }
        
        /* Ajuste para o botÃ£o 'Copiar Lista' garantir alinhamento central */
        .card > button {
            width: 100%;
            margin-top: 10px;
            background: #475569;
        }

        textarea {
            width: 100%;
            height: 300px;
            margin-top: 20px;
            padding: 12px;
            border: 1px solid #e2e8f0;
            border-radius: 8px;
            font-family: monospace;
            font-size: 14px;
            resize: vertical;
            box-sizing: border-box; /* Inclui padding e borda na largura total */
        }
        .stats {
            margin-top: 10px;
            font-size: 0.9rem;
            color: #16a34a;
            font-weight: 500;
        }

        /* Opcional: Media Query para telas muito pequenas, forÃ§ando o input de quantidade a ser menor */
        @media (max-width: 400px) {
            #qtd {
                width: 60px !important; 
                flex-grow: 0;
            }
        }
    </style>
</head>
<body>

<div class="card">
    <h1>Gerador de LicenÃ§as ðŸ”‘</h1>
    <p>Selecione o sistema para gerar a chave correta.</p>
    
    <div class="control-group">
        <select id="sistema-selector">
            <option value="JANINA">Aula Pro</option>
            <option value="GATOS">PlantÃ£o Pro</option>
        </select>

        <input type="number" id="qtd" value="50" min="1" max="1000" style="width: 80px;">
        <button onclick="gerarLote()">Gerar Chaves</button>
    </div>

    <div id="status" class="stats"></div>
    <textarea id="output" readonly placeholder="As chaves geradas aparecerÃ£o aqui..."></textarea>
    <button onclick="copiar()">Copiar Lista</button> 
</div>

<script>
    const SEGREDO_GATOS = "PACOCA_POMPOM_PRETA_KEY_2025";
    const SEGREDO_JANAINA = "SEMPRE_VOU_TE_AMAR_JANAINA_KEY_2025";

    function gerarAssinatura(textoBase, segredo) {
        let hash = 0;
        const stringMista = textoBase + segredo;
        
        for (let i = 0; i < stringMista.length; i++) {
            const char = stringMista.charCodeAt(i);
            hash = ((hash << 5) - hash) + char;
            hash |= 0;
        }
        
        const hex = Math.abs(hash).toString(16).toUpperCase().padStart(4, '0');
        return hex.slice(-4); 
    }

    function gerarChaveUnica(segredo) {
        const array = new Uint32Array(3);
        window.crypto.getRandomValues(array);
        let corpo = "";
        
        for(let i=0; i<3; i++) {
            const parte = array[i].toString(16).toUpperCase().padStart(4, '0').slice(-4);
            corpo += parte;
        }
        
        const assinatura = gerarAssinatura(corpo, segredo);
        return `${corpo.slice(0,4)}-${corpo.slice(4,8)}-${corpo.slice(8,12)}-${assinatura}`;
    }

    function gerarLote() {
        const qtd = document.getElementById('qtd').value;
        const output = document.getElementById('output');
        const status = document.getElementById('status');
        const sistema = document.getElementById('sistema-selector').value;
        
        const segredoAtual = (sistema === 'GATOS') ? SEGREDO_GATOS : SEGREDO_JANAINA;
        
        let lista = [];

        for(let i=0; i<qtd; i++) {
            lista.push(gerarChaveUnica(segredoAtual));
        }

        output.value = lista.join('\n');
        status.textContent = `${qtd} chaves geradas para: ${sistema === 'GATOS' ? 'PlantÃ£o Pro' : 'Aula Pro'}`;
    }

    function copiar() {
        const output = document.getElementById('output');
        output.select();
        document.execCommand('copy');
        alert('Chaves copiadas para a Ã¡rea de transferÃªncia!');
    }
</script>

</body>
</html>
