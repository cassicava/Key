<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Gerador de Chaves - Multi Sistema</title>
    <style>
        /* Estilos Base (Aplicados em todas as telas) */
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background-color: #f0f2f5;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            margin: 0;
            padding: 10px; /* Reduzi o padding base para ganhar espa√ßo */
            box-sizing: border-box;
        }
        
        .card {
            background: white;
            padding: 1rem; /* Reduzi o padding interno para ganhar espa√ßo */
            border-radius: 12px;
            box-shadow: 0 4px 20px rgba(0,0,0,0.1);
            width: 100%;
            max-width: 600px;
            text-align: center;
        }

        h1 { color: #2563eb; margin-bottom: 0.5rem; font-size: 1.8rem; } /* Tamanho padr√£o */
        p { color: #64748b; margin-bottom: 1rem; font-size: 1rem; } /* Tamanho padr√£o */
        
        .control-group {
            display: flex;
            gap: 10px;
            justify-content: center;
            align-items: center;
            margin-bottom: 15px; /* Reduzi a margem inferior */
            flex-wrap: wrap;
        }

        select, input {
            padding: 10px; /* Reduzi o padding */
            border-radius: 8px;
            border: 1px solid #ccc;
            font-size: 0.95rem;
            flex-grow: 1; 
            min-width: 100px; 
        }

        button {
            background: #2563eb;
            color: white;
            border: none;
            padding: 10px 20px; /* Reduzi o padding */
            border-radius: 8px;
            font-size: 0.95rem;
            font-weight: bold;
            cursor: pointer;
            transition: background 0.2s;
            flex-shrink: 0;
        }
        button:hover { background: #1d4ed8; }
        
        .card > button {
            width: 100%;
            margin-top: 10px;
            background: #475569;
        }

        textarea {
            width: 100%;
            height: 150px; /* **PRINCIPAL MUDAN√áA: Reduzi drasticamente a altura** */
            margin-top: 15px; /* Reduzi a margem superior */
            padding: 8px; /* Reduzi o padding */
            border: 1px solid #e2e8f0;
            border-radius: 8px;
            font-family: monospace;
            font-size: 13px;
            resize: vertical;
            box-sizing: border-box;
        }
        .stats {
            margin-top: 8px; /* Reduzi a margem superior */
            font-size: 0.85rem;
            color: #16a34a;
            font-weight: 500;
        }

        /* Otimiza√ß√µes Espec√≠ficas para Mobile (Telas com at√© 600px de largura) */
        @media (max-width: 600px) {
            h1 {
                font-size: 1.5rem; /* Reduz o tamanho do t√≠tulo */
                margin-bottom: 0.3rem;
            }
            p {
                font-size: 0.9rem; /* Reduz o tamanho da instru√ß√£o */
                margin-bottom: 0.8rem;
            }

            /* For√ßa o input de quantidade a ser pequeno */
            #qtd {
                width: 60px !important; 
                flex-grow: 0;
                min-width: 60px;
            }
        }
    </style>
</head>
<body>

<div class="card">
    <h1>Gerador de Chaves üîë</h1> 
    <p>Selecione o Sistema para gerar.</p> 
    
    <div class="control-group">
        <select id="sistema-selector">
            <option value="JANINA">Aula Pro</option>
            <option value="GATOS">Plant√£o Pro</option>
        </select>

        <input type="number" id="qtd" value="50" min="1" max="1000">
        <button onclick="gerarLote()">Gerar Chaves</button>
    </div>

    <div id="status" class="stats"></div>
    <textarea id="output" readonly placeholder="As chaves geradas aparecer√£o aqui..."></textarea>
    <button onclick="copiar()">Copiar Lista</button> 
</div>

<script>
    const SEGREDO_GATOS = "PACOCA_POMPOM_PRETA_KEY_2025";
    const SEGREDO_JANAINA = "SEMPRE_VOU_TE_AMAR_JANAINA_KEY_2025";

    function gerarAssinatura(textoBase, segredo) {
        let hash = 0;
        const stringMista = textoBase + segredo;
        
        for (let i = 0; i < stringMista.length; i++) {
            const char = stringMista.charCodeAt(i);
            hash = ((hash << 5) - hash) + char;
            hash |= 0;
        }
        
        const hex = Math.abs(hash).toString(16).toUpperCase().padStart(4, '0');
        return hex.slice(-4); 
    }

    function gerarChaveUnica(segredo) {
        const array = new Uint32Array(3);
        window.crypto.getRandomValues(array);
        let corpo = "";
        
        for(let i=0; i<3; i++) {
            const parte = array[i].toString(16).toUpperCase().padStart(4, '0').slice(-4);
            corpo += parte;
        }
        
        const assinatura = gerarAssinatura(corpo, segredo);
        return `${corpo.slice(0,4)}-${corpo.slice(4,8)}-${corpo.slice(8,12)}-${assinatura}`;
    }

    function gerarLote() {
        const qtd = document.getElementById('qtd').value;
        const output = document.getElementById('output');
        const status = document.getElementById('status');
        const sistema = document.getElementById('sistema-selector').value;
        
        const segredoAtual = (sistema === 'GATOS') ? SEGREDO_GATOS : SEGREDO_JANAINA;
        
        let lista = [];

        for(let i=0; i<qtd; i++) {
            lista.push(gerarChaveUnica(segredoAtual));
        }

        output.value = lista.join('\n');
        status.textContent = `${qtd} chaves geradas para: ${sistema === 'GATOS' ? 'Plant√£o Pro' : 'Aula Pro'}`;
    }

    function copiar() {
        const output = document.getElementById('output');
        output.select();
        document.execCommand('copy');
        alert('Chaves copiadas para a √°rea de transfer√™ncia!');
    }
</script>

</body>
</html>
